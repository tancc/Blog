<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="寫！都寫！隨便寫！">
    <meta name="keyword" content="blog web programming">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-person-128.png">
    <link rel="alternate" type="application/atom+xml" title="Tan" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        webpack筆記｜Tan&#39;s Note
        
    </title>

    <link rel="canonical" href="https://yinting-tan.com/2016/01/17/webpack/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/blog-style.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- direct to https -->
    <script type="text/javascript">
        var host = "yoursite.com";
        if ((host == window.location.host) && (window.location.protocol != "https:"))
            window.location.protocol = "https";
    </script>
</head>

<style>

    header.intro-header {
        background-image: url('//o7bkkhiex.bkt.clouddn.com/lion-blur-bg.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost = "true" data-istags="false
" data-ishome = "false" >
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/">
                <span class="brand-logo">
                    Tan
                </span>
                's Blog
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
					
                    
                        
							
                        <li>
                            <a href="/archives/">archives</a>
                        </li>
							
						
                    
                        
							
                        <li>
                            <a href="/tags/">tags</a>
                        </li>
							
						
                    
					
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img"
     src="https://unsplash.it/600/300/?random">


<style>
    
    header.intro-header {
        background-image: url('https://unsplash.it/600/300/?random')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>webpack筆記</h1>
                    
                    <span class="meta">
                         作者 Tan
                        <span>
                          日期 2016-01-17
                         </span>
                    </span>
                    <div class="tags text-center">
                        
                        <a class="tag" href="/tags/#webpack"
                           title="webpack">webpack</a>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            webpack筆記
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container">
                <p>這邊內容會包含：</p>
<ul>
<li>簡單介紹webpack的基本使用方法</li>
<li>常用的loader、pluggin</li>
<li>好用的現成Boilerplate</li>
</ul>
<h1 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h1><p>首先要先安裝webpack，這裡使用全域安裝來做示範<br><code>npm i webpack -g //--save 也可使用</code><br> <a id="more"></a></p>
<h1 id="檔案結構"><a href="#檔案結構" class="headerlink" title="檔案結構"></a>檔案結構</h1><p>在這裡我使用的檔案結構如下<br>/app<br>　- index.js<br>　- component.js<br>- package.json<br>- webpack.config.js</p>
<p>其中app資料夾存放需要載入的檔案，webpack會將裡面的程式碼打包，而webpack會根據webpack.config.js的內容來建立bundle檔案</p>
<h1 id="Entry-and-Ouput"><a href="#Entry-and-Ouput" class="headerlink" title="Entry and Ouput"></a>Entry and Ouput</h1><p>app中兩個檔案的內容如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// component.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> content = <span class="string">'hello world!'</span></span><br><span class="line">  <span class="keyword">return</span> content</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">var</span> component = <span class="built_in">require</span>(<span class="string">'./component'</span>)</span><br><span class="line"><span class="built_in">document</span>.write(component());</span><br></pre></td></tr></table></figure></p>
<p>在這裡我偷懶使用<code>html-webpack-plugin</code>這個plugin來自動產生html檔，當然也是可以自己建<br><code>npm i html-webpack-plugin --save-dev</code><br>而這是目前的<code>webpack.config.js</code>的內容<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlwebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./app/index.js'</span>, <span class="comment">//設定定進入點</span></span><br><span class="line">  output: &#123;                <span class="comment">//設定bundle檔案要建置的路徑與名稱</span></span><br><span class="line">    path: <span class="string">'./build/'</span>, </span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlwebpackPlugin(&#123;</span><br><span class="line">      title: <span class="string">'webpack app'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接著在terminal輸入<code>webpack</code>就會看到多了build這個資料夾，以及裡頭的兩個檔案bundle.js與index.html了<br>開啟index.html畫面會出現hello world!，這就表示成功了！</p>
<h1 id="Multiple-Entry-Point"><a href="#Multiple-Entry-Point" class="headerlink" title="Multiple Entry Point"></a>Multiple Entry Point</h1><p>當app有多個進入點時，webpack也可個別build<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line">...</span><br><span class="line">  entry: &#123;</span><br><span class="line">  component1: <span class="string">'./app/component.js'</span>, <span class="comment">//name: path </span></span><br><span class="line">  component2: <span class="string">'./app/component2.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: <span class="string">'./build/'</span>, </span><br><span class="line">    filename: <span class="string">'[name].js'</span> <span class="comment">//根據name來命名bundle後的檔案</span></span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>執行webpack後會發現build資料夾出現的檔案不是bundle.js，而是component1.js 與 component2.js</p>
<h1 id="Loaders"><a href="#Loaders" class="headerlink" title="Loaders"></a>Loaders</h1><p>上面所介紹的是非常基本的功能，根據entry和output的設定將程式碼bundle在一起<br>loader是webpack很重要的一部份，有了loader我們就可以做更多事情，如處理各種靜態檔案stylesheets, images, html template或是transplie ES6等等。</p>
<h2 id="CSS-and-Image"><a href="#CSS-and-Image" class="headerlink" title="-CSS and Image"></a>-CSS and Image</h2><p>要處理css需要安裝<code>css-loader</code>和<code>style-loader</code>這兩個loader<br>而處理圖片需要安裝<code>url-loader</code><br><code>npm i css-loader style-loader url-loader --save-dev</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//style.css</span></span><br><span class="line">body &#123;</span><br><span class="line">  background: cornsilk;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./style.css'</span>)</span><br><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">img.src = <span class="built_in">require</span>(<span class="string">"./picture.png"</span>);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(img);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line">...</span><br><span class="line">module: &#123;</span><br><span class="line">  loaders: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.css/</span>,       <span class="comment">//使用regular expression來找到符合副檔名的檔案</span></span><br><span class="line">      loader: <span class="string">"style-loader!css-loader"</span>, <span class="comment">//也可使用loaders: ['style', 'css']</span></span><br><span class="line">      include: path.join(__dirname, <span class="string">'app'</span>) <span class="comment">//檔案路徑</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; test: <span class="regexp">/\.(png|jpg)$/</span>, loader: <span class="string">'url-loader?limit=8192'</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line">...</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>如此一來就可以看到頁面載入css了！這裡簡單說明一下loaders的設定，<br><code>test</code>為設定此loader所要處理的檔案類型，使用regular expression來找到符合副檔名的檔案。<br><code>loader</code>就是設定此類型檔案所要使用的loader為何，而在處理時會由右到左來載入，以此為例<code>css-loader</code>會先讀取css檔，再由<code>style-loader</code>將樣式插入html中，而不同的loader間會用’!’來連接。<br><code>include</code>則是可以提高效率其實是可用可不用的，它用來指定檔案的所在地，若不使用webpack就會掃完全部資料夾。<br>而從url-loader這部份可以看到，loader後是可以加上參數的，這裡的<code>limit=8192</code>表示，若圖檔大小大於8192 bytes則會使用Data URL 否則是使用一般的URL。</p>
<h2 id="CSS-Module-and-PostCSS"><a href="#CSS-Module-and-PostCSS" class="headerlink" title="-CSS Module and PostCSS"></a>-CSS Module and PostCSS</h2><p>postcss部分只要安裝<br><code>npm install postcss-loader --save</code><br>除此之外可以再另外裝些好用的工具<br><code>npm install rucksack-css cssnext precss --save</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> rucksack = <span class="built_in">require</span>(<span class="string">'rucksack-css'</span>),</span><br><span class="line">  cssnext = <span class="built_in">require</span>(<span class="string">'cssnext'</span>)</span><br><span class="line">...</span><br><span class="line">module: &#123;</span><br><span class="line">  loaders: [&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    loader: <span class="string">'style-loader!css-loader?modules&amp;importLoaders=1&amp;localIdentName=[name]_[local]_[hash:base64:4]!postcss-loader'</span></span><br><span class="line">  &#125;]</span><br><span class="line">&#125;,</span><br><span class="line">postcss: [</span><br><span class="line">  cssnext,    <span class="comment">//可以使用下一代css的語法</span></span><br><span class="line">  rucksack(&#123;  <span class="comment">//css可以省略前綴</span></span><br><span class="line">    autoprefixer: <span class="literal">true</span></span><br><span class="line">  &#125;),</span><br><span class="line">  precss <span class="comment">//使你可以寫sass-like的css</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure></p>
<p><code>css-loader?modules</code>這樣子就可以使用css module了，而後面則是去設定名稱和使用postcss<br>postcss的詳細介紹看<a href="https://github.com/postcss/postcss" target="_blank" rel="external">這裡</a></p>
<h2 id="JS-and-JSX"><a href="#JS-and-JSX" class="headerlink" title="-JS and JSX"></a>-JS and JSX</h2><p>讓webpack可以將ES6轉譯成ES5，寫react可以認得jsx需要裝babel的相關的套件<br><code>npm i babel-core babel-loader babel-preset-es2015 babel-preset-react --save-dev</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//component.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'./component'</span></span><br><span class="line"> </span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Hello</span> /&gt;</span>, document.body);</span><br><span class="line"></span><br><span class="line">//webpack.config.js</span><br><span class="line">...</span><br><span class="line">module: &#123;</span><br><span class="line">  loaders: [</span><br><span class="line">    &#123; test: /\.jsx?/, loaders: ['babel'], include: path.join(__dirname, 'app') &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">resolve: &#123;  //require時不用加入副檔名的機制</span><br><span class="line">  extensions: ['', '.js', '.jsx']</span><br><span class="line">&#125;,</span><br><span class="line">...</span></span><br></pre></td></tr></table></figure></p>
<p>另外還需要在目錄增加一個babel的設定檔，<code>.babelrc</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//.babelrc</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"presets"</span>: [<span class="string">"es2015"</span>,<span class="string">"react"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>當然這部份也是可以直接寫在webpack.config.js的loaders中(<code>babel?presets[]=react,presets[]=es2015</code>)，但如此一來只有webpack可以使用這設定其他工具則不行。</p>
<h1 id="wepack-dev-server"><a href="#wepack-dev-server" class="headerlink" title="wepack-dev-server"></a>wepack-dev-server</h1><p>一個小型的express server，主要的好處就是即時更新，不要再跑回瀏覽器ctrl-r了。<br><code>npm i webpack-dev-server --save-dev</code><br>安裝完後只要執行<code>webpack-dev-server</code>就行了，到<a href="http://localhost:8080/webpack-dev-server/" target="_blank" rel="external">http://localhost:8080/webpack-dev-server/</a> 就可看到畫面。詳細的介紹可以看<a href="https://webpack.github.io/docs/webpack-dev-server.html" target="_blank" rel="external">webpack-dev-server</a>。<br>執行wepack-dev-server時並不會編譯出實體的bundle.js檔，而是會放在記憶體中。這也就是說當時既要deploy的時候必須再把bundle檔生出來。<br>通常在使用的時候會先去設定package.json<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package.json</span></span><br><span class="line">...</span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"webpack-dev-server --devtool eval --hot --inline --progress --colors --content-base build"</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p><code>--devtool</code>是用來產生Sourcemaps檔，能比較好debugger<br><code>--hot</code> 加上HotModuleReplacementPlugin，更新模式變成hot mode<br><code>--inline</code> 遷入webpack-dev-server到bundle中<br><code>--progress --colors</code>方便看執行狀況<br><code>--content-base</code>一般情況會處理當前目錄，但有設定的話就是說”我的index.html在XXX這個資料夾，並且要將產生的bundle.js放在這，如果有設定<code>publicPath</code>的話bundle.js的路徑會為/publicPath/bundle.js”。</p>
<p>如此一來只需要<code>npm run start</code>就能順利執行了！這部份也可以在webpack.config.js中設定<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line">...</span><br><span class="line">output: &#123;</span><br><span class="line">  path: <span class="string">'./build'</span>,</span><br><span class="line">  publicPath: <span class="string">'/assets/'</span>, <span class="comment">//編譯後的bundle檔放的地方，若沒有設定的話預設是在contentBase</span></span><br><span class="line">  filename: <span class="string">'bundle.js'</span></span><br><span class="line">&#125;,</span><br><span class="line">devServer: &#123;</span><br><span class="line">  devtool: <span class="string">'eval'</span></span><br><span class="line">  hot: <span class="literal">true</span>,</span><br><span class="line">  inline: <span class="literal">true</span>,</span><br><span class="line">  progress: <span class="literal">true</span>,</span><br><span class="line">  colors: <span class="literal">true</span>,</span><br><span class="line">  contentBase: <span class="string">'/build/'</span>,</span><br><span class="line">  <span class="comment">//host: 'localhost',</span></span><br><span class="line">  <span class="comment">//post: 8080</span></span><br><span class="line">&#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h1 id="Commons-Chunk-Plugin"><a href="#Commons-Chunk-Plugin" class="headerlink" title="Commons Chunk Plugin"></a>Commons Chunk Plugin</h1><p>當許多支檔案都有共同的區塊(如react, jquery…)，這時候可以使用CommonsChunkPlugin將相同區塊抽出獨立到一支檔案，避免每次都要重複加載。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&apos;webpack&apos;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    bundle: &apos;./app/index.js&apos;,</span><br><span class="line">    vendor: [&apos;react&apos;]</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: &apos;./build&apos;,</span><br><span class="line">    filename: &apos;[name].js&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [&apos;&apos;, &apos;.js&apos;, &apos;.jsx&apos;]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new webpack.optimize.CommonsChunkPlugin(&apos;vendor&apos;, &apos;vendor.js&apos;) //有設定vendor</span><br><span class="line">    // new webpack.optimize.CommonsChunkPlugin(&apos;common.js&apos;) //沒有vendor</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>而html中記得<code>&lt;script src=&quot;vendor.js&quot;&gt;</code>要先載入，否則會出錯！！<br>其中若是沒有vendor的話，webpack會自動去看entry的檔案，若有重複require的模組則會自動把他抽出放到common.js中。</p>
<h1 id="Provide-Plugin"><a href="#Provide-Plugin" class="headerlink" title="Provide Plugin"></a>Provide Plugin</h1><p>如果有些模組你想讓他在每個檔案都可以使用，而不用一直去require的話，可以使用ProvidePlugin。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line">$(<span class="string">'h1'</span>).text(<span class="string">'Hello World'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">    $: <span class="string">"jquery"</span>,</span><br><span class="line">    jQuery: <span class="string">"jquery"</span>,</span><br><span class="line">    <span class="string">"window.jQuery"</span>: <span class="string">"jquery"</span></span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h1 id="Extract-Text-Plugin"><a href="#Extract-Text-Plugin" class="headerlink" title="Extract Text Plugin"></a>Extract Text Plugin</h1><p>若沒有使用其他plugin的話，webpack會在html中生成style這tag，然後把css塞進去。若要額外將css檔案抽出成一個檔案的話可以用這個pluggin。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line">...</span><br><span class="line">const ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">"extract-text-webpack-plugin"</span>)</span><br><span class="line">...</span><br><span class="line">module: &#123;</span><br><span class="line">  loaders: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.css/</span>,</span><br><span class="line">      loader: ExtractTextPlugin.extract(<span class="string">"style"</span>,<span class="string">"css"</span>),</span><br><span class="line">      include: path.join(__dirname, <span class="string">'app'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'/stylesheets/bundle.css'</span>, &#123;allChunks: <span class="literal">true</span>&#125;)  <span class="comment">//設定檔名</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>然後html的head中加入<code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;..//stylesheets/bundle.css&quot;&gt;</code>。其他<a href="https://github.com/webpack/extract-text-webpack-plugin" target="_blank" rel="external">詳細設定</a></p>
<h1 id="Boilerplate"><a href="#Boilerplate" class="headerlink" title="Boilerplate"></a>Boilerplate</h1><p>目前有看到比較好用的是這兩個，基本上可以就直接拿來用不用去經過太多煩複的設定。<br><a href="https://github.com/gaearon/react-transform-boilerplate" target="_blank" rel="external">react-transform-boilerplate</a><br><a href="https://github.com/tj/frontend-boilerplate" target="_blank" rel="external">frontend-boilerplate</a></p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>基本上的設定就這樣子，很多地方有不同的寫法，但都大同小異。<br>在設定時比較需要注意的是路徑問題，常常因為路徑沒有設好所以東西才會跑不出來。</p>

                <hr>
                

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2016/01/20/javascript常見誤區/" data-toggle="tooltip" data-placement="top"
                           title="Javascript常見誤區">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2016/01/14/linux指令筆記/" data-toggle="tooltip" data-placement="top"
                           title="linux指令筆記">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                

                

            </div>

            <div class="hidden-xs col-sm-3 toc-col">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#事前準備"><span class="toc-text">事前準備</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#檔案結構"><span class="toc-text">檔案結構</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Entry-and-Ouput"><span class="toc-text">Entry and Ouput</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Multiple-Entry-Point"><span class="toc-text">Multiple Entry Point</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Loaders"><span class="toc-text">Loaders</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CSS-and-Image"><span class="toc-text">-CSS and Image</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CSS-Module-and-PostCSS"><span class="toc-text">-CSS Module and PostCSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JS-and-JSX"><span class="toc-text">-JS and JSX</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wepack-dev-server"><span class="toc-text">wepack-dev-server</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Commons-Chunk-Plugin"><span class="toc-text">Commons Chunk Plugin</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Provide-Plugin"><span class="toc-text">Provide Plugin</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Extract-Text-Plugin"><span class="toc-text">Extract Text Plugin</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Boilerplate"><span class="toc-text">Boilerplate</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Summary"><span class="toc-text">Summary</span></a></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5 class="text-center">
                        <a href="/tags/">FEATURED TAGS</a>
                    </h5>
                    <div class="tags">
                        
                        <a class="tag" href="/tags/#webpack"
                           title="webpack">webpack</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>






<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                

                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/RyanTan.YT">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://github.com/tancc">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://www.linkedin.com/in/yin-ting-tan-172184b5">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Tan 2017
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                    <br>
                    Theme by <a href="https://haojen.github.io/">Haojen Ma</a>
                </p>

            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/blog.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://yinting-tan.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>

<!-- Google Analytics -->



<!-- Baidu Tongji -->


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','undefined','2.0.0');
</script>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="https://scontent-tpe1-1.xx.fbcdn.net/v/t1.0-1/p160x160/10003519_623356174385513_1929844211_n.jpg?oh=cfb625a8fa42f1ba846175a29b200ed6&amp;oe=59366A76">
</body>

</html>
